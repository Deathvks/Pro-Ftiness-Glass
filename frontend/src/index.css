/* frontend/src/index.css */

/* 1) TAILWIND */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* 2) VARIABLES (modo oscuro por defecto) */
:root {
  /* Coincide con el Dark Theme en useAppTheme.js (#0c111b) */
  --bg-primary: #0c111b;
  --bg-secondary: #121826;
  --text-primary: #e5e7eb;
  --text-secondary: #9ca3af;
  --text-muted: #6b7280;

  /* Acento (GREEN por defecto) */
  --color-accent: #22c55e;
  --color-accent-transparent: rgba(34, 197, 94, 0.12);
  --color-accent-border: rgba(34, 197, 94, 0.28);

  /* Semánticos extra */
  --color-green: #22c55e;
  --color-red: #ef4444;
  --color-neutral: #6b7280;

  /* Glassmorphism - GLOBAL DEFAULT (Darkish) */
  --glass-border: rgba(255, 255, 255, 0.15);
  --glass-bg: rgba(26, 35, 53, 0.65);
  --glass-highlight: rgba(255, 255, 255, 0.15);
  --glass-shadow-inner: rgba(0, 0, 0, 0.25);
}

/* 3) TEMAS - APLICADOS AL ROOT (HTML) */

.dark-theme {
  --bg-primary: #0c111b;
  --bg-secondary: #121826;
  --text-primary: #e5e7eb;
  --text-secondary: #9ca3af;
  --text-muted: #6b7280;

  --glass-border: rgba(255, 255, 255, 0.15);
  --glass-bg: rgba(26, 35, 53, 0.65);
  --glass-highlight: rgba(255, 255, 255, 0.15);
  --glass-shadow-inner: rgba(0, 0, 0, 0.25);
}

.light-theme {
  --bg-primary: #f7fafc;
  --bg-secondary: #ffffff;
  --text-primary: #0f172a;
  --text-secondary: #64748b;
  --text-muted: #94a3b8;

  /* Borde sutil oscuro para modo claro */
  --glass-border: rgba(0, 0, 0, 0.1);
  --glass-bg: rgba(255, 255, 255, 0.75);
  --glass-highlight: rgba(255, 255, 255, 0.6);
  --glass-shadow-inner: rgba(255, 255, 255, 0.5);
}

.oled-theme {
  --bg-primary: #000000;
  --bg-secondary: #000000;
  --text-primary: #ffffff;
  --text-secondary: #a3a3a3;
  --text-muted: #525252;

  /* AJUSTADO: Todo blanco al 10% (0.1) para consistencia */
  --glass-border: rgba(255, 255, 255, 0.1);
  --glass-bg: rgba(0, 0, 0, 0.7); 
  --glass-highlight: rgba(255, 255, 255, 0.1);
  --glass-shadow-inner: rgba(255, 255, 255, 0.1);
}

/* 4) PALETAS DE ACENTO */
.accent-green {
  --color-accent: #22c55e;
  --color-accent-transparent: rgba(34, 197, 94, 0.12);
  --color-accent-border: rgba(34, 197, 94, 0.28);
}

.accent-blue {
  --color-accent: #3b82f6;
  --color-accent-transparent: rgba(59, 130, 246, 0.12);
  --color-accent-border: rgba(59, 130, 246, 0.28);
}

.accent-violet {
  --color-accent: #8b5cf6;
  --color-accent-transparent: rgba(139, 92, 246, 0.12);
  --color-accent-border: rgba(139, 92, 246, 0.28);
}

.accent-amber {
  --color-accent: #f59e0b;
  --color-accent-transparent: rgba(245, 158, 11, 0.12);
  --color-accent-border: rgba(245, 158, 11, 0.28);
}

.accent-rose {
  --color-accent: #f43f5e;
  --color-accent-transparent: rgba(244, 63, 94, 0.12);
  --color-accent-border: rgba(244, 63, 94, 0.28);
}

.accent-teal {
  --color-accent: #14b8a6;
  --color-accent-transparent: rgba(20, 184, 166, 0.12);
  --color-accent-border: rgba(20, 184, 166, 0.28);
}

.accent-cyan {
  --color-accent: #06b6d4;
  --color-accent-transparent: rgba(6, 182, 212, 0.12);
  --color-accent-border: rgba(6, 182, 212, 0.28);
}

.accent-orange {
  --color-accent: #f97316;
  --color-accent-transparent: rgba(249, 115, 22, 0.12);
  --color-accent-border: rgba(249, 115, 22, 0.28);
}

.accent-lime {
  --color-accent: #84cc16;
  --color-accent-transparent: rgba(132, 204, 22, 0.12);
  --color-accent-border: rgba(132, 204, 22, 0.28);
}

.accent-fuchsia {
  --color-accent: #d946ef;
  --color-accent-transparent: rgba(217, 70, 239, 0.12);
  --color-accent-border: rgba(217, 70, 239, 0.28);
}

.accent-emerald {
  --color-accent: #10b981;
  --color-accent-transparent: rgba(16, 185, 129, 0.12);
  --color-accent-border: rgba(16, 185, 129, 0.28);
}

.accent-indigo {
  --color-accent: #6366f1;
  --color-accent-transparent: rgba(99, 102, 241, 0.12);
  --color-accent-border: rgba(99, 102, 241, 0.28);
}

.accent-purple {
  --color-accent: #a855f7;
  --color-accent-transparent: rgba(168, 85, 247, 0.12);
  --color-accent-border: rgba(168, 85, 247, 0.28);
}

.accent-pink {
  --color-accent: #ec4899;
  --color-accent-transparent: rgba(236, 72, 153, 0.12);
  --color-accent-border: rgba(236, 72, 153, 0.28);
}

.accent-red {
  --color-accent: #ef4444;
  --color-accent-transparent: rgba(239, 68, 68, 0.12);
  --color-accent-border: rgba(239, 68, 68, 0.28);
}

.accent-yellow {
  --color-accent: #eab308;
  --color-accent-transparent: rgba(234, 179, 8, 0.12);
  --color-accent-border: rgba(234, 179, 8, 0.28);
}

.accent-sky {
  --color-accent: #0ea5e9;
  --color-accent-transparent: rgba(14, 165, 233, 0.12);
  --color-accent-border: rgba(14, 165, 233, 0.28);
}

.accent-slate {
  --color-accent: #64748b;
  --color-accent-transparent: rgba(100, 116, 139, 0.12);
  --color-accent-border: rgba(100, 116, 139, 0.28);
}

.accent-zinc {
  --color-accent: #71717a;
  --color-accent-transparent: rgba(113, 113, 122, 0.12);
  --color-accent-border: rgba(113, 113, 122, 0.28);
}

.accent-stone {
  --color-accent: #78716c;
  --color-accent-transparent: rgba(120, 113, 108, 0.12);
  --color-accent-border: rgba(120, 113, 108, 0.28);
}

.accent-neutral {
  --color-accent: #737373;
  --color-accent-transparent: rgba(115, 115, 115, 0.12);
  --color-accent-border: rgba(115, 115, 115, 0.28);
}

/* 5) COMPONENTES BASE */
@layer components {

  html,
  body,
  #root {
    @apply h-full;
  }

  /* IMPORTANTE: Crear contexto de apilamiento en root para que el Blob
     se pinte sobre el background del body */
  #root {
    isolation: isolate;
  }

  html {
    background-color: var(--bg-primary);
    transition: background-color 0.3s ease;
  }

  body {
    @apply text-text-primary antialiased;
    overflow: hidden;
    background-color: var(--bg-primary);
    transition: background-color 0.3s ease;
  }

  main {
    height: 100%;
  }

  h1,
  h2,
  h3 {
    @apply text-text-primary;
  }

  /* --- GLOBAL INPUT OVERRIDES --- */
  /* Eliminamos el anillo/glow azul por defecto o de Tailwind y forzamos solo el borde de acento */
  input:focus,
  textarea:focus,
  select:focus,
  button:focus,
  input:focus-visible,
  textarea:focus-visible,
  select:focus-visible,
  button:focus-visible {
    @apply outline-none;
  }

  input:focus,
  textarea:focus,
  select:focus {
    box-shadow: none !important; /* Elimina el anillo "azul" o doble borde */
    border-color: var(--color-accent) !important; /* Fuerza el color de acento */
    outline: none !important;
  }

  /* --- GLASSMORPHISM UNIVERSAL --- */
  .glass,
  .bg-glass-bg,
  .bg-\[--glass-bg\] {
    background-color: var(--glass-bg);
    
    /* Efecto Blur obligatorio para glass */
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    
    /* Bordes y sombras unificados */
    border: 1px solid var(--glass-border);
    border-top-color: var(--glass-highlight);
    
    box-shadow: 
      inset 0 1px 1px var(--glass-shadow-inner),
      0 4px 6px -1px rgba(0, 0, 0, 0.1),
      0 2px 4px -2px rgba(0, 0, 0, 0.1);
  }

  .form-error-text {
    @apply text-red text-sm mt-1;
  }

  /* Checkbox */
  input[type="checkbox"] {
    background-color: transparent !important;
    border: 1px solid var(--glass-border) !important;
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    outline: none !important;
  }

  input[type="checkbox"]:checked {
    background-color: var(--color-accent) !important;
    border-color: var(--color-accent) !important;
    outline: none !important;
  }

  input[type="checkbox"]:focus,
  input[type="checkbox"]:focus-visible {
    outline: none !important;
    box-shadow: none !important;
  }

  /* Checkbox Light Theme */
  .light-theme input[type="checkbox"] {
    background-color: white !important;
    border-color: #d1d5db !important;
  }

  .light-theme input[type="checkbox"]:checked {
    background-color: var(--color-accent) !important;
    border-color: var(--color-accent) !important;
  }

  input[type="checkbox"]:checked::before {
    content: '✓';
    display: block;
    text-align: center;
    color: white;
    font-size: 12px;
    line-height: 14px;
  }

  /* QR Scanner */
  @keyframes scan {
    0% {
      transform: translateY(0);
    }

    100% {
      transform: translateY(240px);
    }
  }

  .scan-line {
    animation: scan 2.5s infinite alternate ease-in-out;
  }

  .scanner-wrapper>div,
  .scanner-wrapper #qr-shaded-region {
    border: none !important;
    border-radius: 0.5rem;
  }

  .scanner-wrapper #qr-shaded-region * {
    display: none !important;
  }

  .scanner-wrapper #html5-qrcode-anchor-scan-type-change,
  .scanner-wrapper #html5-qrcode-select-camera,
  .scanner-wrapper #html5-qrcode-footnote,
  .scanner-wrapper a[href="https://scanapp.org"] {
    display: none !important;
  }

  .scanner-wrapper video {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
  }
}

/* 6) UTILIDADES */
@layer utilities {
  ::-webkit-scrollbar {
    display: none;
  }

  * {
    scrollbar-width: none;
  }

  @keyframes roam-blob {
    0% {
      transform: translate(-50%, -50%) scale(1);
    }

    33% {
      transform: translate(-60%, -40%) scale(1.15);
    }

    66% {
      transform: translate(-40%, -60%) scale(0.9);
    }

    100% {
      transform: translate(-50%, -50%) scale(1);
    }
  }

  @keyframes fade-in-up {
    0% {
      opacity: 0;
      transform: translateY(6px);
    }

    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fade-in {
    0% {
      opacity: 0
    }

    100% {
      opacity: 1
    }
  }

  @keyframes toast-in {
    from {
      transform: translateX(100%);
      opacity: 0;
    }

    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  @keyframes toast-out {
    from {
      transform: translateX(0);
      opacity: 1;
    }

    to {
      transform: translateX(100%);
      opacity: 0;
    }
  }
}